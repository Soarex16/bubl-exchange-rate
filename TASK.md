Монокарп увлечен банкингом настолько, что решает открыть свой собственный банк. А еще он любит простые числа. И не доверяет никому, кроме своего компьютера. Поэтому он решил создать суперсовременное приложение для своего инновационного банка, которое позволило бы ему вести учет в банке.
Монокарп хочет выдавать в своем банке кредиты, но кредиты не простые. Они удовлетворяют следующим условиям:
1. Кредиты выдаются лишь на сроки, равные простым числам (расчет ведется в днях).
2. Если кредит выдается более, чем на месяц, то выплаты ведутся каждый месяц. Иначе платеж всего один и выплачивается он в конце срока.
3. Сумма каждого платежа должна быть частью мантиссы числа **π**. Причем если очередной платеж совершен спустя **n** дней с даты выдачи кредита, то сумма платежа составляет **3** знака мантиссы (n, n+1, n+2). Например, если платеж осуществляется на 2 день, то его сумма составляет 415 бублей (3,1**415**92).

Монокарп не доверяет своему бездушному компьютеру, поэтому хочет считать число **π** каждый раз заново (не используя кеширование и предпросчет).

Монокарп очень добрый, поэтому он выдает кредиты всем. Но некоторые люди не выдерживают столь длительного ожидания и уходят, попросив перед этим Монокарпа отменить расчет. А кто-то просит напомнить ему, что он решил оформить кредит, когда приложение закончит расчет и уходит попить чая с бубликами. Также клиенты Монокарпа не очень хорошо дружат с математикой и не знают какие числа являются простыми. Поэтому Монокарп подбирает им кредиты на сроки, которые ближе всего к тем, которые хотят клиенты.

Монокарп выдает кредиты в долларах, но так как является патриотом своей страны, то обратно он принимает их в Бублях. Стоит учесть, что курс Бубля очень нестабилен и постоянно меняется. Но меняется не очень сильно. Поэтому Монокарп хочет отслеживать котировки в реальном времени. Для этого он использует сервис, предоставленный Бублебанком.

Для того чтобы добавить клиента в свое приложение Монокарпу необходимо знать его фамилию, имя, дату рождения и паспортные данные. Паспортные данные в стране Монокарпа состоят из 6 цифр.

Клиент может одновременно иметь только один кредит. Все клиенты Монокарпа очень ответственные и никогда не пропускают платежи.

После выдачи кредита клиенты приходят в назначенные дни и отдают Монокарпу выплаты по кредиту. Монокарп складывает деньги в банку из-под варенья и заносит выплаты в приложение.

Очень внимательно подумав над задачей Монокарп составил следующую постановку задачи.

# Функциональные требования
1. Приложение должно обеспечивать возможность ведения учета клиентов. Просмотр, создание, редактирование и редактирование клиентов.
Для этого нужны следующие формы:
    1. Форма со списком клиентов. На форме должен отображаться список клиентов с возможностью перехода к просмотру конкретного клиента. Имеется возможность создания и удаления клиентов. Клиентов, которые имеют активные кредиты удалять нельзя.
    2. Карточка просмотра клиента. В карточке отображаются сведения о клиенте и выданных ему кредитах.
    3. Форма заведения клиента. Указывается фамилия, имя, год рождения и паспортные данные. Все паспортные данные уникальны.
2. Приложение должно обеспечивать возможность оформления кредитов зарегистрированным клиентам. Процесс оформления кредита следующий:
    * Если пользователя нет в системе, то его необходимо завести
    * Оформили заявку на выдачу кредита. Расчет суммы происходит в фоновом режиме. Расчеты ведутся в порядке очереди. Т.е. сначала заявка находится в статусе «ожидает расчета», когда приходит ее очередь, то в статусе «расчет». После расчета она переходит в статус «расчет завершен». На каждом из этапов должна иметься возможность отмены заявки на кредит.
    * После расчета заявки пользователю демонстрируются рассчитанные условия. Если его все устраивает, то кредит оформляется. Иначе заявка отменяется.
    * Когда клиент осуществляет последнюю выплату, кредит переходит в статус «выплачен».
Для этого нужны следующие формы:
    1. Форма со списком кредитов. На форме должен отображаться список кредитов с возможностью перехода к просмотру конкретного кредита. Имеется возможность перехода к созданию новой заявки на кредит.
    2. Форма оформления заявки на кредит. На форме указывается клиент, и желаемый срок. После оформления заявки она принимает статус «ожидает расчета».
    3. Форма просмотра кредита. На форме отображается статус кредита. Если кредит еще не оформлен (т.е. это только заявка), то должна иметься возможность отменить заявку.
3. Приложение должно обеспечивать возможность ведения учета выплат по кредитам. Для этого нужны следующие формы:
    1. Форма со списком выплат по кредитам. На форме должен отображаться список выплат. Имеется возможность добавления новой выплаты.
    2. Форма создания выплаты по кредиту. На форме указывается клиент, информация о кредите и сумма выплаты.
4. Приложение должно обеспечивать возможность мониторинга курса бублей в режиме реального времени. Расчет суммы кредита осуществляется в долларах, но выплаты по кредитам осуществляются в Бублях.

# Нефункциональные требования
1. Разрабатываемое приложение должно функционировать без бекенда. Для хранения данных должна использоваться indexed DB.
2. Расчет кредитов должен осуществляться в отдельном Worker-е.
3. Котировки должны обновляться в режиме реального времени с помощью WebSocket-ов. Котировки приходят от стороннего сервиса (https://github.com/Soarex16/bubl-exchange-rate). Сервер присылает сообщения в формате JSON. Сообщения имеют следующий вид:
```yaml
{
  "t": 1620406293003, # метка времени (Unix timestamp milliseconds)
  "c": 12.3456 # курс Бубля относительно доллара
}
```
4. Число Пи должно вычисляться для каждого кредита заново. Например, можно использовать https://stackoverflow.com/a/64286624 
5. Приложение должно быть красивым. Посмотреть как выглядят банковские админки можно тут https://www.behance.net/search/projects?search=bank%20dashboard

# Стек технологий
1. React. То, ради чего и происходит весь этот кипиш.
2. Redux/MobX. Redux лучше использовать с помощью redux-toolkit, чтобы не было так больно.
3. Typescript – учитывая опыт разработки на C# будет проще освоиться + не позволяет вольностей JS, что спасает от глупых ошибок.
4. React router – почти что стандарт в сообществе react. Можно что-то другое (например, с помощью router 5 можно круто изолировать роутинг от view слоя).
5. Стилизация приложения. Не стоит тратить много времени, лучше взять готовую библиотеку компонентов. Например: https://ant.design/  https://material-ui.com/  https://blueprintjs.com/  
6. Jest. Для юнит-тестов.

# Критерии оценивания задачи
Оценка задачи производится совместно ментором и оппонентом. Результирующая оценка представляет собой средневзвешенное двух оценок (0.4 ментора, 0.6 оппонента).

1. Насколько выполнена поставленная задача. **(350 баллов)**. В первую очередь приложение должно реализовывать требования бизнеса. Оценивается степень выполнения поставленных требований.
2. Архитектура приложения **(300 баллов)**. Очень большое внимание уделяется архитектуре. Наиболее важные критерии:
    1. Модульность приложения. Наличие четких границ между модулями. Наличие четкого API у модулей.
    2. Единообразие и соблюдение выбранной архитектуры приложения.
3. Тестирование приложения **(250 баллов)**. Наличие модульных тестов для критически важных элементов приложения. Не обязательно покрывать тестами **АБСОЛЮТНО ВСЕ**. Важно уметь выделять критически важные для функционирования приложения участки приложения и покрывать их необходимым количеством test case-ов. Здесь также оценивается уровень общей стабильности приложения.
4. Понятность кода **(100 баллов)**. Насколько хорошо код задокументирован. Это не означает, что комментировать нужно каждую строку/функцию. Полезно комментировать неочевидные участки кода или обосновывать в комментариях причину, по которой было выбрано то или иное решение.

Чем лучше продемонстрированы навыки владения конкретными API и технологиями, тем меньше по ним будет вопросов при устной беседе.
